{%- style -%}
  .search-form-wrapper {
    display: flex;
    align-items: stretch;
    border: 1.5px solid var(--color-border);
    border-radius: var(--radius-full);
    overflow: hidden;
    background: var(--color-background);
  }

  .search-form-wrapper:focus-within {
    border-color: var(--color-text);
  }

  .search-input {
    flex: 1;
    padding: 1rem 1.5rem;
    border: none;
    background: transparent;
    font-family: var(--font-body);
    font-size: 1rem;
    color: var(--color-text);
    outline: none;
    -webkit-appearance: none;
    appearance: none;
  }

  .search-input::placeholder {
    color: var(--color-text-light);
  }

  .search-input::-webkit-search-cancel-button,
  .search-input::-webkit-search-decoration {
    -webkit-appearance: none;
    appearance: none;
  }

  .search-submit {
    padding: 1rem 1.5rem;
    background: var(--color-button);
    color: var(--color-button-text);
    border: none;
    font-family: var(--font-body);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: background-color var(--transition-fast);
  }

  .search-submit:hover {
    background: #333;
  }
{%- endstyle -%}

<section class="page-section" data-section-id="{{ section.id }}">
  <div class="container container-narrow">
    <header class="page-header">
      <h1>Search</h1>
    </header>

    <form action="{{ routes.search_url }}" method="get" class="search-form mb-xl">
      <div class="search-form-wrapper">
        <input
          type="search"
          name="q"
          value="{{ search.terms | escape }}"
          placeholder="Search products, articles..."
          class="search-input"
        >
        <button type="submit" class="search-submit">
          Go
        </button>
      </div>
    </form>

    {%- if search.performed -%}
      {%- if search.results_count == 0 -%}
        <div class="text-center">
          <p style="font-size: 1.25rem; margin-bottom: 1rem;">
            No results found for "{{ search.terms }}"
          </p>
          <p class="text-mono" style="color: var(--color-text-light);">
            Try a different search term
          </p>
        </div>
      {%- else -%}
        <p class="text-mono mb-lg" style="color: var(--color-text-light);">
          {{ search.results_count }} result{% if search.results_count > 1 %}s{% endif %} for "{{ search.terms }}"
        </p>

        <div class="blog-grid">
          {%- for item in search.results -%}
            <a href="{{ item.url }}" class="blog-card">
              <div class="blog-card-image">
                {%- if item.featured_image -%}
                  <img
                    src="{{ item.featured_image | image_url: width: 800 }}"
                    alt="{{ item.featured_image.alt | default: item.title }}"
                    width="400"
                    height="300"
                    loading="lazy"
                  >
                {%- else -%}
                  <img
                    src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Crect fill='%23f5f0eb' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' fill='%23999' text-anchor='middle' dy='.3em' font-family='sans-serif'%3E{{ item.object_type | capitalize }}%3C/text%3E%3C/svg%3E"
                    alt="Search result"
                    width="400"
                    height="300"
                    loading="lazy"
                  >
                {%- endif -%}
              </div>
              <div class="blog-card-content">
                <p class="blog-card-date text-mono">{{ item.object_type | capitalize }}</p>
                <h3 class="blog-card-title">{{ item.title }}</h3>
                {%- if item.price -%}
                  <p class="text-mono">{{ item.price | money }}</p>
                {%- endif -%}
              </div>
            </a>
          {%- endfor -%}
        </div>

        {%- if search.results.size < search.results_count -%}
          <div class="text-center mt-xl">
            <p class="text-mono" style="color: var(--color-text-light);">
              Showing {{ search.results.size }} of {{ search.results_count }} results
            </p>
          </div>
        {%- endif -%}
      {%- endif -%}
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Search Results",
  "tag": "section",
  "settings": []
}
{% endschema %}
