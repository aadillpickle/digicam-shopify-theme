<article class="article-section" data-section-id="{{ section.id }}">
  <div class="container">
    <header class="article-header">
      <p class="article-date">{{ article.published_at | date: '%B %d, %Y' }}</p>
      <h1 class="article-title">{{ article.title }}</h1>
      {%- if article.author -%}
        <p class="article-author text-mono">By {{ article.author }}</p>
      {%- endif -%}
    </header>

    {%- if article.image -%}
      <div class="article-featured-image">
        <img
          src="{{ article.image | image_url: width: 2000 }}"
          alt="{{ article.image.alt | default: article.title }}"
          width="1000"
          height="600"
          loading="eager"
        >
      </div>
    {%- endif -%}

    <div class="article-content">
      {{ article.content }}
    </div>

    {%- if blog.comments_enabled? -%}
      <div class="article-comments mt-2xl">
        <h3>Comments ({{ article.comments_count }})</h3>

        {%- paginate article.comments by 10 -%}
          {%- for comment in article.comments -%}
            <div class="comment">
              <p class="comment-author text-mono">{{ comment.author }}</p>
              <p class="comment-date">{{ comment.created_at | date: '%B %d, %Y' }}</p>
              <div class="comment-content">{{ comment.content }}</div>
            </div>
          {%- endfor -%}

          {%- if paginate.pages > 1 -%}
            {{ paginate | default_pagination }}
          {%- endif -%}
        {%- endpaginate -%}

        {%- form 'new_comment', article -%}
          <h4 class="mt-lg">Leave a comment</h4>

          {%- if form.errors -%}
            <div class="form-errors">
              {{ form.errors | default_errors }}
            </div>
          {%- endif -%}

          <div class="form-group">
            <label for="comment-author">Name</label>
            <input type="text" name="comment[author]" id="comment-author" required>
          </div>

          <div class="form-group">
            <label for="comment-email">Email</label>
            <input type="email" name="comment[email]" id="comment-email" required>
          </div>

          <div class="form-group">
            <label for="comment-body">Comment</label>
            <textarea name="comment[body]" id="comment-body" rows="4" required></textarea>
          </div>

          <button type="submit" class="btn btn-primary">Post Comment</button>
        {%- endform -%}
      </div>
    {%- endif -%}

    <div class="article-nav mt-2xl">
      <a href="{{ blog.url }}" class="btn btn-secondary">Back to {{ blog.title }}</a>
    </div>
  </div>
</article>

{% schema %}
{
  "name": "Article Main",
  "tag": "section",
  "settings": []
}
{% endschema %}
